{"version":3,"file":"utils-exportJson.js","sourceRoot":"","sources":["../../src/utils/utils-exportJson.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter } from '@stencil/core';\n\nimport { JsonSQLite, JsonTable, JsonColumn, JsonIndex, JsonTrigger, JsonView, JsonProgressListener } from '../interfaces/interfaces';\nimport { UtilsSQLite } from './utils-sqlite';\nimport { UtilsJSON } from './utils-json';\n\nexport class UtilsExportJSON {\n\n  static async createExportObject(db: any, sqlObj: JsonSQLite,\n    exportProgress: EventEmitter<JsonProgressListener>): Promise<JsonSQLite> {\n    const retObj: JsonSQLite = {} as JsonSQLite;\n    let tables: JsonTable[] = [];\n    let views: JsonView[] = [];\n    let errmsg = '';\n    try {\n      // get View's name\n      views = await UtilsExportJSON.getViewsName(db);\n\n      // get Table's name\n      const resTables: any[] = await UtilsExportJSON.getTablesNameSQL(db);\n      if (resTables.length === 0) {\n        return Promise.reject(\n          new Error(\"createExportObject: table's names failed\"));\n      } else {\n        const isTable = await UtilsSQLite.isTableExists(db, 'sync_table');\n        if(!isTable && sqlObj.mode === 'partial') {\n          return Promise.reject(new Error('No sync_table available'));\n        }\n\n        switch (sqlObj.mode) {\n          case 'partial': {\n            tables = await UtilsExportJSON.getTablesPartial(db, resTables, exportProgress);\n            break;\n          }\n          case 'full': {\n            tables = await UtilsExportJSON.getTablesFull(db, resTables, exportProgress);\n            break;\n          }\n          default: {\n            errmsg =\n              'createExportObject: expMode ' + sqlObj.mode + ' not defined';\n            break;\n          }\n        }\n        if (errmsg.length > 0) {\n          return Promise.reject(new Error(errmsg));\n        }\n        if (tables.length > 0) {\n          retObj.database = sqlObj.database;\n          retObj.version = sqlObj.version;\n          retObj.encrypted = sqlObj.encrypted;\n          retObj.mode = sqlObj.mode;\n          retObj.tables = tables;\n          if (views.length > 0) {\n            retObj.views = views;\n          }\n\n        }\n        return Promise.resolve(retObj);\n      }\n    } catch (err) {\n      return Promise.reject(new Error('createExportObject: ' + err.message));\n    }\n  }\n\n  static async getViewsName(mDb: any): Promise<JsonView[]> {\n    const views: JsonView[] = [];\n    let sql = 'SELECT name,sql FROM sqlite_master WHERE ';\n    sql += \"type='view' AND name NOT LIKE 'sqlite_%';\";\n    let retQuery: any[] = [];\n    try {\n      retQuery = await UtilsSQLite.queryAll(mDb, sql, []);\n      for (const query of retQuery) {\n        const view: JsonView = {} as JsonView;\n        view.name = query.name;\n        view.value = query.sql.substring(query.sql.indexOf('AS ') + 3);\n        views.push(view);\n      }\n      return Promise.resolve(views);\n    } catch (err) {\n      return Promise.reject(new Error(`getViewsName: ${err.message}`));\n    }\n  }\n\n  static async getTablesFull(db: any, resTables: any[],\n    exportProgress: EventEmitter<JsonProgressListener>): Promise<JsonTable[]> {\n    const tables: JsonTable[] = [];\n    let errmsg = '';\n    try {\n      // Loop through the tables\n      for (const rTable of resTables) {\n        let tableName: string;\n        let sqlStmt: string;\n\n        if (rTable.name) {\n          tableName = rTable.name;\n        } else {\n          errmsg = 'GetTablesFull: no name';\n          break;\n        }\n        if (rTable.sql) {\n          sqlStmt = rTable.sql;\n        } else {\n          errmsg = 'GetTablesFull: no sql';\n          break;\n        }\n        const table: JsonTable = {} as JsonTable;\n        // create Table's Schema\n        const schema: JsonColumn[] = await UtilsExportJSON.getSchema(sqlStmt/*, tableName*/);\n        if (schema.length === 0) {\n          errmsg = 'GetTablesFull: no Schema returned';\n          break;\n        }\n        // check schema validity\n        await UtilsJSON.checkSchemaValidity(schema);\n        // create Table's indexes if any\n        const indexes: JsonIndex[] = await UtilsExportJSON.getIndexes(db, tableName);\n        if (indexes.length > 0) {\n          // check indexes validity\n          await UtilsJSON.checkIndexesValidity(indexes);\n        }\n        // create Table's triggers if any\n        const triggers: JsonTrigger[] = await UtilsExportJSON.getTriggers(db, tableName);\n        if (triggers.length > 0) {\n          // check triggers validity\n          await UtilsJSON.checkTriggersValidity(triggers);\n        }\n        let msg: string = `Full: Table ${tableName} schema export completed ...`\n        exportProgress.emit({progress: msg});\n        // create Table's Data\n        const query = `SELECT * FROM ${tableName};`;\n        const values: any[] = await UtilsJSON.getValues(db, query, tableName);\n        table.name = tableName;\n        if (schema.length > 0) {\n          table.schema = schema;\n        } else {\n          errmsg = `GetTablesFull: must contain schema`;\n          break;\n        }\n        if (indexes.length > 0) {\n          table.indexes = indexes;\n        }\n        if (triggers.length > 0) {\n          table.triggers = triggers;\n        }\n        if (values.length > 0) {\n          table.values = values;\n        }\n        if (Object.keys(table).length <= 1) {\n          errmsg = `GetTablesFull: table ${tableName} is not a jsonTable`;\n          break;\n        }\n        msg = `Full: Table ${tableName} table data export completed ...`\n        exportProgress.emit({progress: msg});\n\n        tables.push(table);\n      }\n      if (errmsg.length > 0) {\n        return Promise.reject(new Error(errmsg));\n      }\n      return Promise.resolve(tables);\n    } catch (err) {\n      return Promise.reject(new Error(`GetTablesFull: ${err.message}`));\n    }\n  }\n  static async getSchema(sqlStmt: string/*, tableName: string*/): Promise<JsonColumn[]> {\n    const schema: JsonColumn[] = [];\n    // take the substring between parenthesis\n    const openPar: number = sqlStmt.indexOf('(');\n    const closePar: number = sqlStmt.lastIndexOf(')');\n    let sstr: string = sqlStmt.substring(openPar + 1, closePar);\n    // check if there is other parenthesis and replace the ',' by '§'\n    try {\n      sstr = await UtilsExportJSON.modEmbeddedParentheses(sstr);\n      const sch: string[]  = sstr.split(\",\");\n      // for each element of the array split the\n      // first word as key\n      for (let j: number = 0; j < sch.length; j++) {\n        let row: string[] = [];\n        const scht: string = sch[j].replace(/\\n/g,\"\").trim();\n        row[0] = scht.substring(0, scht.indexOf(\" \"));\n        row[1] = scht.substring(scht.indexOf(\" \") + 1);\n\n        const jsonRow: JsonColumn = {} as JsonColumn;\n        if (row[0].toUpperCase() === \"FOREIGN\") {\n          const oPar: number = scht.indexOf(\"(\");\n          const cPar: number = scht.indexOf(\")\");\n          const fk = scht.substring(oPar + 1, cPar);\n          const fknames: string[] = fk.split('§');\n          row[0] = fknames.join(',');\n          row[0] = row[0].replace(/, /g,\",\")\n          row[1] = scht.substring(cPar + 2);\n          jsonRow['foreignkey'] = row[0];\n        } else if (row[0].toUpperCase() === \"PRIMARY\") {\n          const oPar: number = scht.indexOf(\"(\");\n          const cPar: number = scht.indexOf(\")\");\n          const pk: string = scht.substring(oPar + 1, cPar);\n          const pknames: string[] = pk.split('§');\n          row[0] = \"CPK_\" + pknames.join('_');\n          row[0] = row[0].replace(/_ /g,\"_\")\n          row[1] = scht;\n          jsonRow['constraint'] = row[0];\n        } else if (row[0].toUpperCase() === \"CONSTRAINT\") {\n          let tRow: string[] = [];\n          const row1t: string = row[1].trim();\n          tRow[0] = row1t.substring(0, row1t.indexOf(\" \"));\n          tRow[1] = row1t.substring(row1t.indexOf(\" \") + 1);\n          row[0] = tRow[0];\n          jsonRow['constraint'] = row[0];\n          row[1] = tRow[1];\n        } else {\n          jsonRow['column'] =row[0];\n        }\n        jsonRow['value'] = row[1].replace(/§/g, \",\");\n        schema.push(jsonRow);\n      }\n      return Promise.resolve(schema);\n    } catch (err) {\n      return Promise.reject(new Error(err.message));\n    }\n  }\n  static async getIndexes(db: any, tableName: string): Promise<JsonIndex[]> {\n    const indexes: JsonIndex[] = [];\n    let errmsg = '';\n    try {\n      let stmt = 'SELECT name,tbl_name,sql FROM sqlite_master WHERE ';\n      stmt += `type = 'index' AND tbl_name = '${tableName}' `;\n      stmt += `AND sql NOTNULL;`;\n      const retIndexes = await UtilsSQLite.queryAll(db, stmt, []);\n      if (retIndexes.length > 0) {\n        for (const rIndex of retIndexes) {\n          const keys: string[] = Object.keys(rIndex);\n          if (keys.length === 3) {\n            if (rIndex['tbl_name'] === tableName) {\n              const sql: string = rIndex['sql'];\n              const mode: string = sql.includes('UNIQUE') ? 'UNIQUE' : '';\n              const oPar: number = sql.lastIndexOf('(');\n              const cPar: number = sql.lastIndexOf(')');\n              const index: JsonIndex = {} as JsonIndex;\n              index.name = rIndex['name'];\n              index.value = sql.slice(oPar + 1, cPar);\n              if (mode.length > 0) index.mode = mode;\n              indexes.push(index);\n            } else {\n              errmsg = `GetIndexes: Table ${tableName} doesn't match`;\n              break;\n            }\n          } else {\n            errmsg = `GetIndexes: Table ${tableName} creating indexes`;\n            break;\n          }\n        }\n        if (errmsg.length > 0) {\n          return Promise.reject(new Error(errmsg));\n        }\n      }\n      return Promise.resolve(indexes);\n    } catch (err) {\n      return Promise.reject(new Error(`GetIndexes: ${err.message}`));\n    }\n  }\n  static async getTriggers(db: any, tableName: string): Promise<JsonTrigger[]> {\n    const triggers: JsonTrigger[] = [];\n    try {\n      let stmt = 'SELECT name,tbl_name,sql FROM sqlite_master WHERE ';\n      stmt += `type = 'trigger' AND tbl_name = '${tableName}' `;\n      stmt += `AND sql NOT NULL;`;\n      const retTriggers = await UtilsSQLite.queryAll(db, stmt, []);\n      if (retTriggers.length > 0) {\n        for (const rTrg of retTriggers) {\n          const keys: string[] = Object.keys(rTrg);\n          if (keys.length === 3) {\n            if (rTrg['tbl_name'] === tableName) {\n              const sql: string = rTrg['sql'];\n\n              const name: string = rTrg['name'];\n              let sqlArr: string[] = sql.split(name);\n              if (sqlArr.length != 2) {\n                return Promise.reject(\n                  new Error(\n                    `GetTriggers: sql split name does not return 2 values`,\n                  ),\n                );\n              }\n              if (!sqlArr[1].includes(tableName)) {\n                return Promise.reject(\n                  new Error(\n                    `GetTriggers: sql split does not contains ${tableName}`,\n                  ),\n                );\n              }\n              const timeEvent = sqlArr[1].split(tableName, 1)[0].trim();\n              sqlArr = sqlArr[1].split(timeEvent + ' ' + tableName);\n              if (sqlArr.length != 2) {\n                return Promise.reject(\n                  new Error(\n                    `GetTriggers: sql split tableName does not return 2 values`,\n                  ),\n                );\n              }\n              let condition = '';\n              let logic = '';\n              if (sqlArr[1].trim().substring(0, 5).toUpperCase() !== 'BEGIN') {\n                sqlArr = sqlArr[1].trim().split('BEGIN');\n                if (sqlArr.length != 2) {\n                  return Promise.reject(\n                    new Error(\n                      `GetTriggers: sql split BEGIN does not return 2 values`,\n                    ),\n                  );\n                }\n                condition = sqlArr[0].trim();\n                logic = 'BEGIN' + sqlArr[1];\n              } else {\n                logic = sqlArr[1].trim();\n              }\n\n              const trigger: JsonTrigger = {} as JsonTrigger;\n              trigger.name = name;\n              trigger.logic = logic;\n              if (condition.length > 0) trigger.condition = condition;\n              trigger.timeevent = timeEvent;\n              triggers.push(trigger);\n            } else {\n              return Promise.reject(\n                new Error(`GetTriggers: Table ${tableName} doesn't match`),\n              );\n            }\n          } else {\n            return Promise.reject(\n              new Error(`GetTriggers: Table ${tableName} creating indexes`),\n            );\n          }\n        }\n      }\n      return Promise.resolve(triggers);\n    } catch (err) {\n      return Promise.reject(new Error(`GetTriggers: ${err.message}`));\n    }\n  }\n  static async getTablesPartial(db: any, resTables: any[],\n    exportProgress: EventEmitter<JsonProgressListener>): Promise<JsonTable[]> {\n    const tables: JsonTable[] = [];\n    let modTables: any = {};\n    let syncDate = 0;\n    let modTablesKeys: string[] = [];\n    let errmsg = '';\n    try {\n      // Get the syncDate and the Modified Tables\n      const partialModeData: any = await UtilsExportJSON\n                              .getPartialModeData(db, resTables);\n      if (Object.keys(partialModeData).includes('syncDate')) {\n        syncDate = partialModeData.syncDate;\n      }\n      if (Object.keys(partialModeData).includes('modTables')) {\n        modTables = partialModeData.modTables;\n        modTablesKeys = Object.keys(modTables);\n      }\n      // Loop trough tables\n      for (const rTable of resTables) {\n        let tableName = '';\n        let sqlStmt = '';\n        if (rTable.name) {\n          tableName = rTable.name;\n        } else {\n          errmsg = 'GetTablesFull: no name';\n          break;\n        }\n        if (rTable.sql) {\n          sqlStmt = rTable.sql;\n        } else {\n          errmsg = 'GetTablesFull: no sql';\n          break;\n        }\n        if (\n          modTablesKeys.length == 0 ||\n          modTablesKeys.indexOf(tableName) === -1 ||\n          modTables[tableName] == 'No'\n        ) {\n          continue;\n        }\n        const table: JsonTable = {} as JsonTable;\n        let schema: JsonColumn[] = [];\n        let indexes: JsonIndex[] = [];\n        let triggers: JsonTrigger[] = [];\n        table.name = rTable;\n        if (modTables[table.name] === 'Create') {\n          // create Table's Schema\n          schema = await UtilsExportJSON.getSchema(sqlStmt/*, tableName*/);\n          if (schema.length > 0) {\n            // check schema validity\n            await UtilsJSON.checkSchemaValidity(schema);\n          }\n          // create Table's indexes if any\n          indexes = await UtilsExportJSON.getIndexes(db, tableName);\n          if (indexes.length > 0) {\n            // check indexes validity\n            await UtilsJSON.checkIndexesValidity(indexes);\n          }\n          // create Table's triggers if any\n          triggers = await UtilsExportJSON.getTriggers(db, tableName);\n          if (triggers.length > 0) {\n            // check triggers validity\n            await UtilsJSON.checkTriggersValidity(triggers);\n          }\n        }\n        let msg: string = `Partial: Table ${tableName} schema export completed ...`\n        exportProgress.emit({progress: msg});\n        // create Table's Data\n        let query = '';\n        if (modTables[tableName] === 'Create') {\n          query = `SELECT * FROM ${tableName};`;\n        } else {\n          query =\n            `SELECT * FROM ${tableName} ` +\n            `WHERE last_modified > ${syncDate};`;\n        }\n        const values: any[] = await UtilsJSON.getValues(db, query, tableName);\n\n        // check the table object validity\n        table.name = tableName;\n        if (schema.length > 0) {\n          table.schema = schema;\n        }\n        if (indexes.length > 0) {\n          table.indexes = indexes;\n        }\n        if (triggers.length > 0) {\n          table.triggers = triggers;\n        }\n        if (values.length > 0) {\n          table.values = values;\n        }\n        if (Object.keys(table).length <= 1) {\n          errmsg = `GetTablesPartial: table ${tableName} is not a jsonTable`;\n          break;\n        }\n        msg = `Partial: Table ${tableName} table data export completed ...`\n        exportProgress.emit({progress: msg});\n        tables.push(table);\n      }\n      if (errmsg.length > 0) {\n        return Promise.reject(new Error(errmsg));\n      }\n      return Promise.resolve(tables);\n    } catch (err) {\n      return Promise.reject(new Error(`GetTablesPartial: ${err.message}`));\n    }\n  }\n  static async getPartialModeData(db: any, resTables: any[]): Promise<any> {\n    const retData: any = {};\n    try {\n      // get the synchronization date\n      const syncDate: number = await UtilsExportJSON.getSynchroDate(db);\n      if (syncDate <= 0) {\n        return Promise.reject(new Error(`GetPartialModeData: no syncDate`));\n      }\n      // get the tables which have been updated\n      // since last synchronization\n      const modTables: any = await UtilsExportJSON.getTablesModified(db, resTables, syncDate );\n      if (modTables.length <= 0) {\n        return Promise.reject(new Error(`GetPartialModeData: no modTables`));\n      }\n      retData.syncDate = syncDate;\n      retData.modTables = modTables;\n      return Promise.resolve(retData);\n    } catch (err) {\n      return Promise.reject(new Error(`GetPartialModeData: ${err.message}`));\n    }\n  }\n  static async getTablesNameSQL(db: any): Promise<any[]> {\n    let sql = 'SELECT name,sql FROM sqlite_master WHERE ';\n    sql += \"type='table' AND name NOT LIKE 'sync_table' \";\n    sql += \"AND name NOT LIKE '_temp_%' \";\n    sql += \"AND name NOT LIKE 'sqlite_%';\";\n    try {\n      const retQuery: any[] = await UtilsSQLite.queryAll(db, sql, []);\n      return Promise.resolve(retQuery);\n    } catch (err) {\n      return Promise.reject(new Error(`getTablesNamesSQL: ${err.message}`));\n    }\n  }\n  static async  getTablesModified(db: any, tables: any[], syncDate: number): Promise<any> {\n    let errmsg = '';\n    try {\n      const retModified: any = {};\n      for (const rTable of tables) {\n        let mode: string;\n        // get total count of the table\n        let stmt = 'SELECT count(*) AS tcount  ';\n        stmt += `FROM ${rTable.name};`;\n        let retQuery: any[] = await UtilsSQLite.queryAll(db, stmt, []);\n        if (retQuery.length != 1) {\n          errmsg = 'GetTableModified: total ' + 'count not returned';\n          break;\n        }\n        const totalCount: number = retQuery[0]['tcount'];\n        // get total count of modified since last sync\n        stmt = 'SELECT count(*) AS mcount FROM ';\n        stmt += `${rTable.name} WHERE last_modified > `;\n        stmt += `${syncDate};`;\n        retQuery = await UtilsSQLite.queryAll(db, stmt, []);\n        if (retQuery.length != 1) break;\n        const totalModifiedCount: number = retQuery[0]['mcount'];\n\n        if (totalModifiedCount === 0) {\n          mode = 'No';\n        } else if (totalCount === totalModifiedCount) {\n          mode = 'Create';\n        } else {\n          mode = 'Modified';\n        }\n        const key: string = rTable.name;\n        retModified[key] = mode;\n      }\n      if (errmsg.length > 0) {\n        return Promise.reject(new Error(errmsg));\n      }\n      return Promise.resolve(retModified);\n    } catch (err) {\n      return Promise.reject(new Error(`GetTableModified: ${err.message}`));\n    }\n  }\n  static async  getSynchroDate(db: any): Promise<number> {\n    try {\n      const stmt = `SELECT sync_date FROM sync_table WHERE id = 1;`;\n      const res = await UtilsSQLite.queryAll(db,stmt,[]);\n      return Promise.resolve(res[0][\"sync_date\"]);\n    } catch (err) {\n      const msg = `GetSynchroDate: ${err.message}`;\n      return Promise.reject(new Error(msg));\n    }\n  }\n  static async  getLastExportDate(db: any): Promise<number> {\n    try {\n      const stmt = `SELECT sync_date FROM sync_table WHERE id = 2;`;\n      const res = await UtilsSQLite.queryAll(db,stmt,[]);\n      if (res.length === 0) {\n        return Promise.resolve(-1);\n      } else {\n        return Promise.resolve(res[0][\"sync_date\"]);\n      }\n    } catch (err) {\n      const msg = `getLastExport: ${err.message}`;\n      return Promise.reject(new Error(msg));\n    }\n  }\n  static async  setLastExportDate(db: any, lastExportedDate: string): Promise<any> {\n    try {\n      const isTable = await UtilsSQLite.isTableExists(db, 'sync_table');\n      if(!isTable) {\n        return Promise.reject(new Error('setLastExportDate: No sync_table available'));\n      }\n      const sDate: number = Math.round(new Date(lastExportedDate).getTime() / 1000);\n      let stmt = \"\";\n      if( await UtilsExportJSON.getLastExportDate(db) > 0) {\n        stmt = `UPDATE sync_table SET sync_date = ${sDate} WHERE id = 2;`;\n      } else {\n        stmt =  `INSERT INTO sync_table (sync_date) VALUES (${sDate});`\n      }\n      const changes: number = await UtilsSQLite.execute(db, stmt, false);\n      if (changes < 0) {\n        return { result: false, message: 'setLastExportDate failed' };\n      } else {\n        return { result: true };\n      }\n    } catch (err) {\n      return { result: false, message: `setLastExportDate failed: ${err.message}` };\n    }\n  }\n  static async  delExportedRows(db:any): Promise<void> {\n    let lastExportDate: number;\n    try {\n      // check if synchronization table exists\n      const isTable = await UtilsSQLite.isTableExists(db, 'sync_table');\n      if(!isTable) {\n        return Promise.reject(new Error('DelExportedRows: No sync_table available'));\n      }\n      // get the last export date\n      lastExportDate = await UtilsExportJSON.getLastExportDate(db);\n      if( lastExportDate < 0) {\n        return Promise.reject(\n          new Error(\"DelExportedRows: no last exported date available\"));\n      }\n      // get the table' name list\n      const resTables: any[] = await UtilsSQLite.getTableList(db);\n      if (resTables.length === 0) {\n        return Promise.reject(\n          new Error(\"DelExportedRows: No table's names returned\"));\n      }\n      // Loop through the tables\n      for (const table of resTables) {\n        let lastId: number = -1\n        // define the delete statement\n        const delStmt = `DELETE FROM ${table}\n              WHERE sql_deleted = 1 AND last_modified < ${lastExportDate};`\n        lastId = await UtilsSQLite.run(db, delStmt, [], true, 'no');\n        if (lastId < 0) {\n          return Promise.reject(new Error('DelExportedRows: lastId < 0'));\n        }\n      }\n    } catch (err) {\n      return Promise.reject(new Error(`DelExportedRows failed: ${err.message}`));\n    }\n\n  }\n  static async modEmbeddedParentheses(sstr: string): Promise<string> {\n    const oParArray: number[] = UtilsExportJSON.indexOfChar(sstr, '(');\n    const cParArray: number[] = UtilsExportJSON.indexOfChar(sstr, ')');\n    if (oParArray.length != cParArray.length) {\n      return Promise.reject(\"ModEmbeddedParentheses: Not same number of '(' & ')'\");\n    }\n    if (oParArray.length === 0) {\n      return Promise.resolve(sstr);\n    }\n    let resStmt = sstr.substring(0, oParArray[0] - 1);\n    for (let i: number = 0; i < oParArray.length; i++) {\n      let str: string;\n      if (i < oParArray.length - 1) {\n          if (oParArray[i + 1] < cParArray[i]) {\n              str = sstr.substring(oParArray[i] - 1, cParArray[i + 1]);\n              i++;\n          } else {\n              str = sstr.substring(oParArray[i] - 1, cParArray[i]);\n          }\n      } else {\n          str = sstr.substring(oParArray[i] - 1, cParArray[i]);\n      }\n      const newS = str.replace(/,/g, \"§\");\n      resStmt += newS;\n      if (i < oParArray.length - 1) {\n          resStmt += sstr.substring(cParArray[i], oParArray[i + 1] - 1);\n      }\n    }\n    resStmt += sstr.substring(cParArray[cParArray.length - 1], sstr.length);\n    return Promise.resolve(resStmt);\n  }\n  static indexOfChar(str: string, char: string): number[] {\n    let tmpArr: string[] = [...str];\n    char = char.toLowerCase();\n    return tmpArr.reduce((results: number[], elem: string, idx: number) =>\n      elem.toLowerCase() === char ? [...results, idx] : results, []);\n  }\n}\n"]}